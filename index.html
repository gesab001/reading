<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
 <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script> 
<body>
<!--<form action="../cgi-bin/addnews.py" method="post">
<input type="text" name="keyword" placeholder="keyword"/>

<input type="text" name="title" placeholder="title"/>

<input type="text" name="url" placeholder="xml address"/>

<input type="submit" value="add"/>
<br>
<form action="../cgi-bin/deletenews.py" method="post">
<input type="text" name="keyword" placeholder="keyword"/>
<input type="submit" value="delete"/>
<br>
</form>-->
<!--<select id="selection" name="news" onchange="loadNews(this.value)"></select>
-->

<div class="container-fluid">
  <br>
  <h1>Bible Vocabulary</h1>
  
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
  <ul class="navbar-nav">
    <li class="nav-item">
      <select id="grouplist" onchange="loadSelection2()">
      </select>
    </li>
  </ul>
</nav>

<div class="container-fluid"><br>
 <h1 id="grouptitle"></h1><br><br>
 <div id="demo" class="list-group">
   <a href="#" class="list-group-item list-group-item-action list-group-item-light">This is a light list group item</a>
 </div>	
</div>

<p id="test"></p>
<p id="test2"></p>
<p id="test3"></p>

<p id="dateUpdate"></p>

<script>

var xhttp = new XMLHttpRequest();
var news;
loadSelectionTitles();
var voabulary;

function loadSelectionTitles(){
   xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       var myArr = JSON.parse(this.responseText);
       loadGroupList(myArr);
	  
    }else{
	document.getElementById("demo").innerHTML = "its  not working";
	}
 };
 xhttp.open("GET", "vocabulary.json", true);
 xhttp.send();
}

function loadGroupList(myArr){
      vocabulary = myArr;
      var text = "";
      for (var x in vocabulary["items"]){
                text += "<option>"+vocabulary["items"][x]["group"]+"</option>";
        }
        document.getElementById("grouplist").innerHTML = text;
      var index = localStorage.getItem("selectedvocabularygroup");
      if (index==null){
          index = 0;
      }
      loadSelection(index);

}
function loadSelection(index){
	var text = "";
        //document.getElementById("demo").innerHTML = text;
        //document.getElementById("test3").innerHTML = vocabulary["items"][index]["words"].length;
	var words = vocabulary["items"][index]["words"];
        var title = vocabulary["items"][index]["group"];
        document.getElementById("grouptitle").innerHTML = title;
	for (var x in words){
                var word = words[x]["word"];
	        var ciphertext = CryptoJS.AES.encrypt(word, 'secret');
                var number = parseInt(x) + 1;
		//text += "<li><a href='./hangman/index.html?word="+ciphertext+"'><h1>"+word+"</h1></a></li>";
                text += "<a href='./hangman/index.html?word="+ciphertext+"' class='list-group-item list-group-item-action list-group-item-light'><h1>"+number+". " + word+"</h1></a>";

	}
	document.getElementById("demo").innerHTML = text;
}

function loadSelection2(){
        var text = "";
        var index = document.getElementById("grouplist").selectedIndex; 
        //document.getElementById("test").innerHTML = index;	
        //document.getElementById("test2").innerHTML = vocabulary["items"].length;
        localStorage.setItem("selectedvocabularygroup", index);
        loadSelection(index);
       
}

</script>

</body>

</html>
